!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("djed-sdk"),require("react"),require("viem"),require("viem/chains")):"function"==typeof define&&define.amd?define(["djed-sdk","react","viem","viem/chains"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).StablePay=t(e.DjedSdk,e.React,e.viem,e.viemChains)}(this,(function(e,t,n,r){"use strict";const a={sepolia:{uri:"https://ethereum-sepolia.publicnode.com/",chainId:11155111,djedAddress:"0x624FcD0a1F9B5820c950FefD48087531d38387f4",tokens:{stablecoin:{symbol:"SOD",address:"0x6b930182787F346F18666D167e8d32166dC5eFBD",decimals:18,isDirectTransfer:!0},native:{symbol:"ETH",decimals:18,isNative:!0}},feeUI:0},"milkomeda-mainnet":{uri:"https://rpc-mainnet-cardano-evm.c1.milkomeda.com",chainId:2001,djedAddress:"0x67A30B399F5Ed499C1a6Bc0358FA6e42Ea4BCe76",tokens:{stablecoin:{symbol:"MOD",address:"0xcbA90fB1003b9D1bc6a2b66257D2585011b004e9",decimals:18,isDirectTransfer:!0},native:{symbol:"mADA",decimals:18,isNative:!0}},feeUI:0},"ethereum-classic":{uri:"https://etc.rivet.link",chainId:61,djedAddress:"0xCc3664d7021FD36B1Fe2b136e2324710c8442cCf",tokens:{stablecoin:{symbol:"ECSD",address:"0x5A7Ca94F6E969C94bef4CE5e2f90ed9d4891918A",decimals:18,isDirectTransfer:!0},native:{symbol:"ETC",decimals:18,isNative:!0}},feeUI:0}};class i{constructor(e,t){this.networkUri=e,this.djedAddress=t}async init(){if(!this.networkUri||!this.djedAddress)throw new Error("Network URI and DJED address are required");try{this.web3=await e.getWeb3(this.networkUri),this.djedContract=e.getDjedContract(this.web3,this.djedAddress);try{const{stableCoin:t,reserveCoin:n}=await e.getCoinContracts(this.djedContract,this.web3),{scDecimals:r,rcDecimals:a}=await e.getDecimals(t,n);this.stableCoin=t,this.reserveCoin=n,this.scDecimals=r,this.rcDecimals=a,this.oracleContract=await e.getOracleAddress(this.djedContract).then((t=>e.getOracleContract(this.web3,t,this.djedContract._address))),this.oracleAddress=this.oracleContract._address}catch(e){if(console.error("[Transaction] Error fetching contract details:",e),e.message&&e.message.includes("execution reverted")){const e=e=>e.includes("milkomeda")?{name:"Milkomeda",chainId:"2001"}:e.includes("mordor")?{name:"Mordor Testnet",chainId:"63"}:e.includes("sepolia")?{name:"Sepolia",chainId:"11155111"}:e.includes("etc.rivet.link")?{name:"Ethereum Classic",chainId:"61"}:{name:"the selected network",chainId:"unknown"},{name:t,chainId:n}=e(this.networkUri);throw new Error(`Failed to interact with Djed contract at ${this.djedAddress} on ${t}.\n\nPossible causes:\n- The contract address may be incorrect\n- The contract may not be deployed on ${t}\n- The contract may not be a valid Djed contract\n\nPlease verify the contract address is correct for ${t} (Chain ID: ${n}).`)}throw e}}catch(e){if(console.error("[Transaction] Error initializing transaction:",e),e.message&&(e.message.includes("CONNECTION ERROR")||e.message.includes("ERR_NAME_NOT_RESOLVED"))){const e=(e=>e.includes("milkomeda")?"Milkomeda":e.includes("mordor")?"Mordor":e.includes("sepolia")?"Sepolia":"the selected network")(this.networkUri);throw new Error(`Failed to connect to ${e} RPC endpoint: ${this.networkUri}\n\nPossible causes:\n- The RPC endpoint may be temporarily unavailable\n- DNS resolution issue (check your internet connection)\n- Network firewall blocking the connection\n\nPlease try again in a few moments or check the network status.`)}throw e}}getBlockchainDetails(){return{web3Available:!!this.web3,djedContractAvailable:!!this.djedContract,stableCoinAddress:this.stableCoin?this.stableCoin._address:"N/A",reserveCoinAddress:this.reserveCoin?this.reserveCoin._address:"N/A",stableCoinDecimals:this.scDecimals,reserveCoinDecimals:this.rcDecimals,oracleAddress:this.oracleAddress||"N/A",oracleContractAvailable:!!this.oracleContract}}async handleTradeDataBuySc(t){if(!this.djedContract)throw new Error("DJED contract is not initialized");if("string"!=typeof t)throw new Error("Amount must be a string");try{return(await e.tradeDataPriceBuySc(this.djedContract,this.scDecimals,t)).totalBCScaled}catch(e){throw console.error("Error fetching trade data for buying stablecoins: ",e),e}}async buyStablecoins(t,n,r){if(!this.djedContract)throw new Error("DJED contract is not initialized");try{const a="0x0232556C83791b8291E9b23BfEa7d67405Bd9839";return await e.buyScTx(this.djedContract,t,n,r,a,this.djedAddress)}catch(e){throw console.error("Error executing buyStablecoins transaction: ",e),e}}}var o="main_stablePayButton__UA7HC",s="main_logo__ITyEy",c="main_buttonText__N-ewy";const l=({onClick:e,size:n="medium"})=>{const r={small:{width:"200px",height:"50px",fontSize:"14px"},medium:{width:"250px",height:"60px",fontSize:"16px"},large:{width:"300px",height:"70px",fontSize:"18px"}},a={small:{width:"35px",height:"33px"},medium:{width:"40px",height:"38px"},large:{width:"45px",height:"43px"}},i=r[n]||r.medium,l=a[n]||a.medium;return t.createElement("button",{className:o,onClick:e,style:i},t.createElement("div",{className:s,style:l}),t.createElement("span",{className:c},"Pay with StablePay"))};var d={dialogOverlay:"PricingCard_dialogOverlay__0XJrE",pricingCard:"PricingCard_pricingCard__LrWb9",small:"PricingCard_small__J4CHj",medium:"PricingCard_medium__EVmTB",large:"PricingCard_large__A6pnX",dialogClose:"PricingCard_dialogClose__jJ1tM",pricingCardHeader:"PricingCard_pricingCardHeader__wGczA",allianceLogo:"PricingCard_allianceLogo__URa-U",stablepayTitle:"PricingCard_stablepayTitle__4t848",pricingCardBody:"PricingCard_pricingCardBody__0wKQn",selectField:"PricingCard_selectField__LBPoZ",transactionReview:"PricingCard_transactionReview__Ix-eL",transactionInfo:"PricingCard_transactionInfo__Ck-Rc",transactionLabel:"PricingCard_transactionLabel__GDux7",transactionValue:"PricingCard_transactionValue__q-xxp",infoSection:"PricingCard_infoSection__gyjMQ",infoIcon:"PricingCard_infoIcon__rraxD",infoText:"PricingCard_infoText__l4b7A",walletButton:"PricingCard_walletButton__llw4v",loading:"PricingCard_loading__2-tGA",error:"PricingCard_error__m5fK-",networkError:"PricingCard_networkError__zR-36",errorText:"PricingCard_errorText__qZRJt","message-box":"PricingCard_message-box__vkUKy",detailsButton:"PricingCard_detailsButton__jHglL",errorDetails:"PricingCard_errorDetails__CzN-7",loadingContainer:"PricingCard_loadingContainer__6nOVa",spinner:"PricingCard_spinner__9ucQv",spin:"PricingCard_spin__24tni"};const u=({children:e,onClose:n,size:r="medium"})=>t.createElement("div",{className:d.dialogOverlay},t.createElement("div",{className:`${d.pricingCard} ${d[r]}`},t.createElement("button",{className:d.dialogClose,onClick:n},"×"),t.createElement("div",{className:d.pricingCardHeader},t.createElement("div",{className:d.allianceLogo}),t.createElement("h2",{className:d.stablepayTitle},"StablePay")),t.createElement("div",{className:d.pricingCardBody},e)));class m{constructor(e){this.networkSelector=e,this.selectedToken=null}selectToken(e){const t=this.networkSelector.getSelectedNetworkConfig();return!(!t||!t.tokens[e])&&(this.selectedToken={key:e,...t.tokens[e]},!0)}getSelectedToken(){return this.selectedToken}getAvailableTokens(){const e=this.networkSelector.getSelectedNetworkConfig();return e?Object.entries(e.tokens).map((([e,t])=>({key:e,...t}))):[]}resetSelection(){this.selectedToken=null}}const h=t.createContext(),w=({children:e,networkSelector:n})=>{const[r]=t.useState((()=>new m(n))),[a,i]=t.useState(null),[o,s]=t.useState(null),[c,l]=t.useState(null),d=()=>{s(null),l(null)};return t.useEffect((()=>{i(n.selectedNetwork)}),[n.selectedNetwork]),t.createElement(h.Provider,{value:{networkSelector:n,tokenSelector:r,selectedNetwork:a,selectedToken:o,transactionDetails:c,setTransactionDetails:l,selectNetwork:e=>!!n.selectNetwork(e)&&(i(e),d(),!0),selectToken:e=>{if(r.selectToken(e)){const e=r.getSelectedToken();return s(e),!0}return!1},resetSelections:()=>{n.selectNetwork(null),i(null),d()}}},e)},k=()=>{const e=t.useContext(h);if(void 0===e)throw new Error("useNetwork must be used within a NetworkProvider");return e},g=()=>{const{networkSelector:e,selectedNetwork:n,selectNetwork:r}=k();return t.createElement("div",{className:d.selectField},t.createElement("label",{htmlFor:"network-select"},"Select Network"),t.createElement("select",{id:"network-select",onChange:e=>{r(e.target.value)},value:n||""},t.createElement("option",{value:"",disabled:!0},"Select a network"),Object.keys(e.availableNetworks).map((e=>t.createElement("option",{key:e,value:e},e)))))},C=()=>{const{networkSelector:e,tokenSelector:n,selectedNetwork:r,selectedToken:a,selectToken:o,setTransactionDetails:s}=k(),[c,l]=t.useState(!1),[u,m]=t.useState(null),h=r?n.getAvailableTokens():[];return t.createElement("div",{className:d.selectField},t.createElement("label",{htmlFor:"token-select"},"Select Token"),t.createElement("select",{id:"token-select",onChange:async t=>{const a=t.target.value;m(null),l(!0);try{if(o(a)){const t=e.getSelectedNetworkConfig(),o=new i(t.uri,t.djedAddress);await o.init();const c=e.getTokenAmount(a),l=o.getBlockchainDetails();let d=null;"native"===a&&(d=await o.handleTradeDataBuySc(String(c))),s({network:r,token:a,tokenSymbol:n.getSelectedToken().symbol,amount:c,receivingAddress:e.getReceivingAddress(),djedContractAddress:t.djedAddress,isDirectTransfer:n.getSelectedToken().isDirectTransfer||!1,isNativeToken:n.getSelectedToken().isNative||!1,tradeAmount:d?d.amount:null,...l})}}catch(e){console.error("Error fetching transaction details:",e),m("Failed to fetch transaction details. Please try again.")}finally{l(!1)}},value:a?a.key:"",disabled:!r||c},t.createElement("option",{value:"",disabled:!0},r?c?"Loading...":"Select a token":"Please select a network first"),h.map((e=>t.createElement("option",{key:e.key,value:e.key},e.symbol," (",e.isDirectTransfer?"Direct Transfer":"Native",")")))),u&&t.createElement("div",{className:d.error},u))};n.defineChain({id:63,name:"Mordor Testnet",network:"mordor",nativeCurrency:{decimals:18,name:"Mordor Ether",symbol:"METC"},rpcUrls:{default:{http:["https://rpc.mordor.etccooperative.org"],webSocket:["wss://rpc.mordor.etccooperative.org/ws"]}},blockExplorers:{default:{name:"BlockScout",url:"https://blockscout.com/etc/mordor"}},testnet:!0});const b=n.defineChain({id:2001,name:"Milkomeda C1 Mainnet",network:"milkomeda",nativeCurrency:{decimals:18,name:"Milkomeda ADA",symbol:"mADA"},rpcUrls:{default:{http:["https://rpc-mainnet-cardano-evm.c1.milkomeda.com"]}},blockExplorers:{default:{name:"Milkomeda Explorer",url:"https://explorer-mainnet-cardano-evm.c1.milkomeda.com"}},testnet:!1}),p=n.defineChain({id:61,name:"Ethereum Classic",network:"etc",nativeCurrency:{decimals:18,name:"Ethereum Classic",symbol:"ETC"},rpcUrls:{default:{http:["https://etc.rivet.link"]}},blockExplorers:{default:{name:"Blockscout",url:"https://blockscout.com/etc/mainnet"}},testnet:!1}),f=t.createContext(null),v=async e=>{if(!window.ethereum)throw new Error("MetaMask not installed");const t=(e=>{switch(e){case"sepolia":return{chainId:`0x${r.sepolia.id.toString(16)}`,chainName:"Sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:r.sepolia.rpcUrls.default.http,blockExplorerUrls:r.sepolia.blockExplorers?.default?.url?[r.sepolia.blockExplorers.default.url]:[]};case"ethereum-classic":return{chainId:`0x${p.id.toString(16)}`,chainName:"Ethereum Classic",nativeCurrency:{name:"Ethereum Classic",symbol:"ETC",decimals:18},rpcUrls:["https://etc.rivet.link"],blockExplorerUrls:["https://blockscout.com/etc/mainnet"]};case"milkomeda-mainnet":return{chainId:`0x${b.id.toString(16)}`,chainName:"Milkomeda C1 Mainnet",nativeCurrency:{name:"Milkomeda ADA",symbol:"mADA",decimals:18},rpcUrls:["https://rpc-mainnet-cardano-evm.c1.milkomeda.com"],blockExplorerUrls:["https://explorer-mainnet-cardano-evm.c1.milkomeda.com"]};default:return null}})(e);if(!t)throw new Error(`Unsupported network: ${e}`);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:t.chainId}]})}catch(e){if(4902!==e.code)throw 4001===e.code?new Error(`User rejected switching to ${t.chainName}. Please switch manually in MetaMask.`):new Error(`Failed to switch to ${t.chainName}: ${e.message}`);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[t]})}catch(e){if(4001===e.code)throw new Error(`User rejected adding ${t.chainName} to MetaMask. Please add it manually.`);throw new Error(`Failed to add ${t.chainName} to MetaMask: ${e.message}`)}}},y=({children:e})=>{const{selectedNetwork:a}=k(),[i,o]=t.useState(null),[s,c]=t.useState(null),[l,d]=t.useState(null),[u,m]=t.useState(null),[h,w]=t.useState(null),[g,C]=t.useState(null),[y,E]=t.useState(!1),_=a?(e=>{switch(e){case"sepolia":return r.sepolia;case"ethereum-classic":return p;case"milkomeda-mainnet":return b;default:return null}})(a):null,S=_?_.id:null,N=t.useRef(null),T=t.useRef(null),A=t.useCallback((()=>{o(null),c(null),d(null),m(null),w(null),C(null)}),[]),D=t.useCallback((async e=>{const t=parseInt(e,16);if(m(t),_&&t===S){if(C(null),window.ethereum&&_){const e=n.createWalletClient({chain:_,transport:n.custom(window.ethereum)});o(e)}}else if(_&&t!==S){C(`Wrong network detected. Please switch to ${_?.name||a||"selected network"}`)}}),[_,S,a]);T.current=D;const x=t.useCallback((async e=>{if(0===e.length){if(A(),window.ethereum){const e=N.current,t=T.current;e&&window.ethereum.removeListener("accountsChanged",e),t&&window.ethereum.removeListener("chainChanged",t)}}else if(d(e[0]),_)try{const t=n.createPublicClient({chain:_,transport:n.http()});c(t);const r=await t.getBalance({address:e[0]});w(parseFloat(r)/Math.pow(10,18))}catch(e){console.error("Error fetching balance:",e),w(null)}}),[_,A]);N.current=x;const P=t.useCallback((()=>{if(A(),window.ethereum){const e=N.current,t=T.current;e&&window.ethereum.removeListener("accountsChanged",e),t&&window.ethereum.removeListener("chainChanged",t)}}),[A]),I=t.useCallback((()=>{_&&c(n.createPublicClient({chain:_,transport:n.http()}))}),[_]),j=t.useCallback((async()=>{if(!window.ethereum)return C("Please install MetaMask or another Web3 wallet"),!1;if(!a||!_)return C("Please select a network first"),!1;E(!0),C(null);try{const e=await window.ethereum.request({method:"eth_requestAccounts"});if(0===e.length)throw new Error("No wallet address found. Please unlock your wallet.");const t=await window.ethereum.request({method:"eth_chainId"});parseInt(t,16)!==S&&await v(a);const r=n.createWalletClient({chain:_,transport:n.custom(window.ethereum)});o(r),d(e[0]),m(S);const i=n.createPublicClient({chain:_,transport:n.http()});c(i);try{const t=await i.getBalance({address:e[0]});w(parseFloat(t)/Math.pow(10,18))}catch(e){console.error("Error fetching balance:",e),w(null)}return N.current=x,T.current=D,window.ethereum.on("accountsChanged",x),window.ethereum.on("chainChanged",D),!0}catch(e){return console.error("Error connecting wallet:",e),C(e.message),!1}finally{E(!1)}}),[a,_,S,x,D]),B=t.useCallback((async()=>{if(!(window.ethereum&&a&&_&&l)){return C("Wallet not connected or network not selected"),null}try{const e=await window.ethereum.request({method:"eth_chainId"});if(parseInt(e,16)!==S){C(null),await v(a);const e=500;await new Promise((t=>setTimeout(t,e)));const t=await window.ethereum.request({method:"eth_chainId"}),n=parseInt(t,16);if(n!==S)throw new Error(`Failed to switch network. MetaMask is still on chain ${n}, expected ${S}`)}const t=n.createWalletClient({chain:_,transport:n.custom(window.ethereum)});return o(t),m(S),C(null),t}catch(e){return C(e.message),null}}),[a,_,S,l]),M=t.useRef(a);return t.useEffect((()=>{if(null!==M.current&&M.current!==a&&l&&(A(),window.ethereum)){const e=N.current,t=T.current;e&&window.ethereum.removeListener("accountsChanged",e),t&&window.ethereum.removeListener("chainChanged",t)}M.current=a}),[a,l,A]),t.useEffect((()=>{I()}),[I]),t.createElement(f.Provider,{value:{walletClient:i,publicClient:s,account:l,chainId:u,balance:h,error:g,isConnecting:y,connectWallet:j,disconnectWallet:P,ensureCorrectNetwork:B,expectedChainId:S}},e)},E=({onTransactionComplete:e})=>{const{networkSelector:r,selectedNetwork:a,selectedToken:o,transactionDetails:s,setTransactionDetails:c}=k(),{connectWallet:l,account:u,walletClient:m,publicClient:h,isConnecting:w,ensureCorrectNetwork:g,expectedChainId:C}=(()=>{const e=t.useContext(f);if(!e)throw new Error("useWallet must be used within a WalletProvider");return e})(),[b,p]=t.useState(null),[v,y]=t.useState(null),[E,_]=t.useState(null),[S,N]=t.useState(""),[T,A]=t.useState(null),[D,x]=t.useState(null),[P,I]=t.useState(!1);if(t.useEffect((()=>{_(null),y(null),N(""),x(null),A(null)}),[a,o]),t.useEffect((()=>{(async()=>{if(a&&o)try{const e=r.getSelectedNetworkConfig(),t=r.getReceivingAddress(),n=r.getTokenAmount(o.key),s=new i(e.uri,e.djedAddress);await s.init(),p(s);let l=null;if("native"===o.key)try{l=await s.handleTradeDataBuySc(String(n)),y(l)}catch(e){console.error("Error fetching trade data:",e)}c({network:a,token:o.key,tokenSymbol:o.symbol,amount:n||"0",receivingAddress:t,djedContractAddress:e.djedAddress,isDirectTransfer:o.isDirectTransfer||!1,isNativeToken:o.isNative||!1,tradeAmount:l?l.amount:null,...s.getBlockchainDetails()})}catch(e){console.error("Error initializing transaction:",e)}})()}),[a,o,r,c]),!s)return t.createElement("div",{className:d.loading},"Initializing transaction...");const j=()=>{if(!T||!a)return null;const e={"ethereum-classic":"https://blockscout.com/etc/mainnet/tx/",sepolia:"https://sepolia.etherscan.io/tx/","milkomeda-mainnet":"https://explorer-mainnet-cardano-evm.c1.milkomeda.com/tx/"};return e[a]?`${e[a]}${T}`:null};return t.createElement("div",{className:d.transactionReview},t.createElement("div",{className:d.transactionInfo},t.createElement("span",{className:d.transactionLabel},"Network:"),t.createElement("span",{className:d.transactionValue},s.network)),t.createElement("div",{className:d.transactionInfo},t.createElement("span",{className:d.transactionLabel},"You Pay:"),t.createElement("span",{className:d.transactionValue},"stablecoin"===o.key?`${s.amount} ${s.tokenSymbol}`:`${v||"Calculating..."} ${s.tokenSymbol}`)),t.createElement("button",{className:d.walletButton,onClick:async()=>{await l()},disabled:w},w?"Connecting...":"Connect Wallet"),u&&!E&&t.createElement("button",{className:d.walletButton,onClick:async()=>{if(u&&s&&b)try{_(null),x(null),N("⏳ Preparing transaction...");const e=s.receivingAddress;let t;if("native"===o.key){const r="0x0232556C83791b8291E9b23BfEa7d67405Bd9839",a=v||"0",i=n.parseEther(String(a));t=await b.buyStablecoins(u,e,i,r),t={...t,value:i,account:u}}else{const a=r.getSelectedNetworkConfig(),i=a?.tokens?.stablecoin?.address;if(!i)throw new Error("Stablecoin address not found in network configuration");const o=s.amount?n.parseUnits(String(s.amount),s.stableCoinDecimals):"0";t={to:i,value:0n,data:n.encodeFunctionData({abi:[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],functionName:"transfer",args:[e,o]}),account:u}}_(t),N("✅ Transaction ready! Click 'Send Transaction' to proceed.")}catch(e){x(e),N("❌ Transaction preparation failed.")}else N("❌ Wallet not connected or transaction details missing")}},"Prepare Transaction"),u&&E&&t.createElement("button",{className:d.walletButton,onClick:async()=>{x(null);try{if(!u||!E)return void N("❌ Wallet account or transaction data is missing");if(!a)return void N("❌ Network not selected");const t=r.getSelectedNetworkConfig();if(!t)return void N("❌ Network configuration not found");N("⏳ Verifying network...");const n=await g();if(!n)return void N("❌ Failed to switch to correct network. Please approve the network switch in MetaMask and try again.");if(!window.ethereum)return void N("❌ MetaMask not available");const i=await window.ethereum.request({method:"eth_chainId"}),c=parseInt(i,16);if(c!==t.chainId){const e=`Network mismatch. MetaMask is on chain ${c}, but ${a} requires chain ${t.chainId}. Please switch networks in MetaMask.`;return N(`❌ ${e}`),void x(new Error(e))}if(n.chain.id!==t.chainId){const e=`Wallet client chain mismatch. Wallet client is on chain ${n.chain.id}, but expected ${t.chainId}.`;return N(`❌ ${e}`),void x(new Error(e))}N("⏳ Sending transaction...");const l=await n.sendTransaction({...E,account:u});A(l),N("✅ Transaction sent!"),e&&e({txHash:l,network:a,token:o?.key,tokenSymbol:o?.symbol,amount:s?.amount,receivingAddress:s?.receivingAddress})}catch(e){x(e),N("❌ Transaction failed."),console.error("Transaction error:",e)}},disabled:null!==T},"Send Transaction"),S&&t.createElement("div",{className:"message-box"},S,D&&t.createElement("button",{onClick:()=>I(!P),className:d.detailsButton},P?"Hide Details":"Show Details")),P&&D&&t.createElement("div",{className:d.errorDetails},t.createElement("pre",null,D.message)),T&&t.createElement("div",{className:d.transactionLink},"✅ Transaction Hash:"," ",j()?t.createElement("a",{href:j(),target:"_blank",rel:"noopener noreferrer",className:d.explorerLink,style:{color:"#007bff",textDecoration:"underline",fontWeight:"bold",cursor:"pointer",wordBreak:"break-word"}},T.slice(0,6),"...",T.slice(-6)):t.createElement("span",{style:{wordBreak:"break-word"}},T)))},_=({onClose:e,buttonSize:n,onTransactionComplete:r})=>{const{resetSelections:a}=k();return t.createElement(u,{onClose:()=>{a(),e()},size:n},t.createElement(g,null),t.createElement(C,null),t.createElement(E,{onTransactionComplete:r}))},S=({onClose:e,buttonSize:n,networkSelector:r,onTransactionComplete:a})=>t.createElement(w,{networkSelector:r},t.createElement(y,null,t.createElement(_,{onClose:e,buttonSize:n,onTransactionComplete:a})));return{NetworkSelector:class{constructor(e){this.merchantConfig=e,this.blacklist=e.getBlacklist(),this.availableNetworks=this.getAvailableNetworks(),this.selectedNetwork=null}getAvailableNetworks(){return Object.entries(a).reduce(((e,[t,n])=>(this.blacklist.includes(n.chainId)||(e[t]=n),e)),{})}selectNetwork(e){return null===e?(this.selectedNetwork=null,console.log("Network selection reset"),!0):this.availableNetworks[e]?(this.selectedNetwork=e,console.log(`Network selected: ${e}`),!0):(console.error(`Invalid network: ${e}`),!1)}getSelectedNetworkConfig(){return this.selectedNetwork?this.availableNetworks[this.selectedNetwork]:null}getReceivingAddress(){return this.merchantConfig.getReceivingAddress()}getTokenAmount(e){return this.merchantConfig.getTokenAmount(this.selectedNetwork,e)}},Transaction:i,Config:class{constructor(e={}){this.receivingAddress=e.receivingAddress||"",this.blacklist=e.blacklist||[],this.amounts=e.Amounts||{},this.validateConfig()}validateConfig(){if(!this.receivingAddress)throw new Error("Receiving address is required");for(const[e,t]of Object.entries(this.amounts)){if(!a[e])throw new Error(`Invalid network: ${e}`);if(!t.stablecoin||"number"!=typeof t.stablecoin||t.stablecoin<=0)throw new Error(`Invalid stablecoin amount for network ${e}`)}}getBlacklist(){return this.blacklist}getReceivingAddress(){return this.receivingAddress}getTokenAmount(e){console.log("Getting amount for network:",e),console.log("Amounts object:",this.amounts);const t=this.amounts[e]?.stablecoin;return console.log("Returning amount:",t),t||0}},Widget:({networkSelector:e,buttonSize:n="medium",onTransactionComplete:r,onSuccess:a})=>{const[i,o]=t.useState(!1),s=r||a;return t.createElement("div",{className:d.widgetContainer},!i&&t.createElement(l,{onClick:()=>{o(!0)},size:n}),i&&t.createElement(S,{onClose:()=>{o(!1)},buttonSize:n,networkSelector:e,onTransactionComplete:s}))},PayButton:l,Dialog:u,NetworkDropdown:g}}));
//# sourceMappingURL=index.js.map
